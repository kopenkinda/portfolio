import{R as a,r as g}from"./chunks/index.dc0bfdb0.js";import{_ as E,a as S,j as s}from"./chunks/jsx-runtime.4eb9117a.js";var B=["size","color"];function M(e){var t=e.size,r=t===void 0?24:t,n=e.color,c=n===void 0?"currentColor":n,o=E(e,B);return a.createElement("svg",S({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-square-check",width:r,height:r,viewBox:"0 0 24 24",stroke:c,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},o),a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a.createElement("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"}),a.createElement("path",{d:"M9 12l2 2l4 -4"}))}var O=["size","color"];function A(e){var t=e.size,r=t===void 0?24:t,n=e.color,c=n===void 0?"currentColor":n,o=E(e,O);return a.createElement("svg",S({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-square-minus",width:r,height:r,viewBox:"0 0 24 24",stroke:c,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},o),a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a.createElement("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"}),a.createElement("line",{x1:"9",y1:"12",x2:"15",y2:"12"}))}var L=["size","color"];function C(e){var t=e.size,r=t===void 0?24:t,n=e.color,c=n===void 0?"currentColor":n,o=E(e,L);return a.createElement("svg",S({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-square",width:r,height:r,viewBox:"0 0 24 24",stroke:c,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},o),a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a.createElement("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"}))}const k=e=>{let t;const r=new Set,n=(u,v)=>{const d=typeof u=="function"?u(t):u;if(!Object.is(d,t)){const x=t;t=v??typeof d!="object"?d:Object.assign({},t,d),r.forEach(y=>y(t,x))}},c=()=>t,l={setState:n,getState:c,subscribe:u=>(r.add(u),()=>r.delete(u)),destroy:()=>{r.clear()}};return t=e(n,c,l),l},T=e=>e?k(e):k;var $={exports:{}},D={},R={exports:{}},_={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=g.exports;function P(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var q=typeof Object.is=="function"?Object.is:P,F=f.useState,V=f.useEffect,I=f.useLayoutEffect,G=f.useDebugValue;function Y(e,t){var r=t(),n=F({inst:{value:r,getSnapshot:t}}),c=n[0].inst,o=n[1];return I(function(){c.value=r,c.getSnapshot=t,w(c)&&o({inst:c})},[e,r,t]),V(function(){return w(c)&&o({inst:c}),e(function(){w(c)&&o({inst:c})})},[e]),G(r),r}function w(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!q(e,r)}catch{return!0}}function W(e,t){return t()}var H=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?W:Y;_.useSyncExternalStore=f.useSyncExternalStore!==void 0?f.useSyncExternalStore:H;R.exports=_;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b=g.exports,U=R.exports;function J(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var K=typeof Object.is=="function"?Object.is:J,Q=U.useSyncExternalStore,X=b.useRef,Z=b.useEffect,ee=b.useMemo,te=b.useDebugValue;D.useSyncExternalStoreWithSelector=function(e,t,r,n,c){var o=X(null);if(o.current===null){var i={hasValue:!1,value:null};o.current=i}else i=o.current;o=ee(function(){function u(p){if(!v){if(v=!0,d=p,p=n(p),c!==void 0&&i.hasValue){var m=i.value;if(c(m,p))return x=m}return x=p}if(m=x,K(d,p))return m;var N=n(p);return c!==void 0&&c(m,N)?m:(d=p,x=N)}var v=!1,d,x,y=r===void 0?null:r;return[function(){return u(t())},y===null?void 0:function(){return u(y())}]},[t,r,n,c]);var l=Q(e,o[0],o[1]);return Z(function(){i.hasValue=!0,i.value=l},[l]),te(l),l};$.exports=D;var re=$.exports;const{useSyncExternalStoreWithSelector:ne}=re;function se(e,t=e.getState,r){const n=ne(e.subscribe,e.getState,e.getServerState||e.getState,t,r);return g.exports.useDebugValue(n),n}const z=e=>{const t=typeof e=="function"?T(e):e,r=(n,c)=>se(t,n,c);return Object.assign(r,t),r},oe=e=>e?z(e):z,j=oe(e=>({yearAfter:"",yearBefore:"",yearExact:"",genres:{},themes:{},publisher:{},set:e})),ce={0:"No data",1:"Singleplayer",2:"Multiplayer",3:"Co-operative",4:"Split-screen",5:"MMO",6:"Battle-Royale"},ie={0:"No data",1:"First person",2:"Third person",3:"Isometric",4:"Side view",5:"Text",6:"Auditory",7:"Virtual Reality"},ae=e=>ce[e]??`Not implemented ${e}`,le=e=>ie[e]??`Not implemented ${e}`,ue=()=>{const[e,t]=j(r=>[r.genres,r.set]);return s.exports.jsx("div",{className:"flex flex-col items-start gap-0.5",children:Object.entries(e).map(([r,n])=>s.exports.jsxs("button",{onClick:()=>{t(n==="disabled"?{genres:{...e,[r]:"enabled"}}:n==="enabled"?{genres:{...e,[r]:"non-selected"}}:{genres:{...e,[r]:"disabled"}})},className:"flex items-center justify-center gap-0.5",children:[n==="non-selected"?s.exports.jsx(C,{}):n==="disabled"?s.exports.jsx(A,{}):s.exports.jsx(M,{}),r]},r))})},de=()=>{const e=j(t=>({yearBefore:t.yearBefore,yearAfter:t.yearAfter,yearExact:t.yearExact,set:t.set}));return s.exports.jsxs("div",{children:[s.exports.jsx("b",{children:"Release date"}),s.exports.jsxs("div",{children:[s.exports.jsx("i",{children:"Released before"}),s.exports.jsx("input",{className:"rounded-md border border-zinc-300 bg-transparent py-0.5 px-2",type:"text",value:e.yearBefore,min:-1,step:1,max:new Date().getFullYear()+50,onChange:t=>e.set(()=>({yearBefore:t.currentTarget.value}))})]}),s.exports.jsxs("div",{children:[s.exports.jsx("i",{children:"Released after"}),s.exports.jsx("input",{className:"rounded-md border border-zinc-300 bg-transparent py-0.5 px-2",type:"text",value:e.yearAfter,min:-1,step:1,max:new Date().getFullYear()+50,onChange:t=>e.set(()=>({yearAfter:t.currentTarget.value}))})]}),s.exports.jsxs("div",{children:[s.exports.jsx("i",{children:"Released exact"}),s.exports.jsx("input",{className:"rounded-md border border-zinc-300 bg-transparent py-0.5 px-2",type:"text",value:e.yearExact,min:-1,step:1,max:new Date().getFullYear()+50,onChange:t=>e.set(()=>({yearExact:t.currentTarget.value}))})]})]})},pe=()=>(j(),s.exports.jsxs("div",{className:"grid w-full grid-cols-4 gap-2 rounded-md border border-zinc-300 p-4",children:[s.exports.jsx(de,{}),s.exports.jsx(ue,{})]})),h=e=>e!==""&&!Number.isNaN(+e),xe=(e,t)=>{const r=Object.entries(t.genres),n=r.filter(([o,i])=>i==="disabled").map(([o])=>o),c=r.filter(([o,i])=>i==="enabled").map(([o])=>o);return e.filter(o=>h(t.yearExact)?o.releaseYear===t.yearExact:!0).filter(o=>h(t.yearExact)?!0:h(t.yearAfter)?+o.releaseYear>+t.yearAfter:!0).filter(o=>h(t.yearExact)?!0:h(t.yearBefore)?+o.releaseYear<+t.yearBefore:!0).filter(o=>{for(const i of o.genres)if(n.includes(i.name))return!1;for(const i of c)if(!o.genres.map(l=>l.name).includes(i))return!1;return!0})},me=({game:e})=>s.exports.jsxs("li",{className:"mb-2 grid grid-cols-9 items-center gap-0.5 border-b border-zinc-300 pb-2 last-of-type:border-b-0",children:[s.exports.jsx("div",{style:{backgroundImage:`url(https://d2c6c3qulxklrf.cloudfront.net/covers/webp/${e.s3_id}.webp)`,backgroundSize:"cover",backgroundPosition:"center center"},className:"grid aspect-[9/12] w-full place-items-center text-center",children:s.exports.jsx("span",{className:"bg-white/70 p-0.5",children:e.label})}),s.exports.jsx("div",{className:"grid place-items-center text-center",children:e.platforms.map(t=>t.name).join(`
`)}),s.exports.jsx("div",{className:"grid place-items-center text-center",children:e.genres.map(t=>t.name).join(`
`)}),s.exports.jsx("div",{className:"grid place-items-center text-center",children:e.themes.map(t=>t.name).join(`
`)}),s.exports.jsx("div",{className:"grid place-items-center text-center",children:e.releaseYear}),s.exports.jsx("div",{className:"grid place-items-center text-center",children:e.game_modes.map(t=>ae(t)).join(`
`)}),s.exports.jsx("div",{className:"grid place-items-center text-center",children:e.game_engines.map(t=>t.name).join(`
`)}),s.exports.jsx("div",{className:"grid place-items-center text-center",children:e.involved_companies.map(t=>t.name).join(`
`)}),s.exports.jsx("div",{className:"grid place-items-center text-center",children:e.player_perspectives.map(t=>le(t)).join(`
`)})]}),he=({initial:e})=>{const t=j();g.exports.useEffect(()=>{const n=new Set;for(const o of e)for(const i of o.genres)n.add(i.name);const c={};for(const o of n)c[o]="non-selected";t.set(()=>({genres:c}))},[]);const r=g.exports.useMemo(()=>xe(e,t),[t]);return s.exports.jsxs("div",{className:"w-full space-y-2",children:[s.exports.jsx(pe,{}),s.exports.jsxs("div",{className:"w-full rounded-md border border-zinc-300 p-4",children:[s.exports.jsxs("p",{className:"text-center",children:[s.exports.jsx("span",{className:"font-bold",children:r.length})," games matching"]}),s.exports.jsx("ul",{className:"space-y-1",children:r.map(n=>s.exports.jsx(me,{game:n},n.value))})]})]})};export{he as default};
