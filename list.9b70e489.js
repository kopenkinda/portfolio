import{R as i,r as g}from"./chunks/index.dc0bfdb0.js";import{_ as N,a as k,j as n}from"./chunks/jsx-runtime.4eb9117a.js";var W=["size","color"];function P(e){var t=e.size,s=t===void 0?24:t,r=e.color,o=r===void 0?"currentColor":r,c=N(e,W);return i.createElement("svg",k({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-eye-off",width:s,height:s,viewBox:"0 0 24 24",stroke:o,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},c),i.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),i.createElement("line",{x1:"3",y1:"3",x2:"21",y2:"21"}),i.createElement("path",{d:"M10.584 10.587a2 2 0 0 0 2.828 2.83"}),i.createElement("path",{d:"M9.363 5.365a9.466 9.466 0 0 1 2.637 -.365c4 0 7.333 2.333 10 7c-.778 1.361 -1.612 2.524 -2.503 3.488m-2.14 1.861c-1.631 1.1 -3.415 1.651 -5.357 1.651c-4 0 -7.333 -2.333 -10 -7c1.369 -2.395 2.913 -4.175 4.632 -5.341"}))}var Y=["size","color"];function R(e){var t=e.size,s=t===void 0?24:t,r=e.color,o=r===void 0?"currentColor":r,c=N(e,Y);return i.createElement("svg",k({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-eye",width:s,height:s,viewBox:"0 0 24 24",stroke:o,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},c),i.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),i.createElement("circle",{cx:"12",cy:"12",r:"2"}),i.createElement("path",{d:"M22 12c-2.667 4.667 -6 7 -10 7s-7.333 -2.333 -10 -7c2.667 -4.667 6 -7 10 -7s7.333 2.333 10 7"}))}var H=["size","color"];function U(e){var t=e.size,s=t===void 0?24:t,r=e.color,o=r===void 0?"currentColor":r,c=N(e,H);return i.createElement("svg",k({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-square-check",width:s,height:s,viewBox:"0 0 24 24",stroke:o,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},c),i.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),i.createElement("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"}),i.createElement("path",{d:"M9 12l2 2l4 -4"}))}var J=["size","color"];function K(e){var t=e.size,s=t===void 0?24:t,r=e.color,o=r===void 0?"currentColor":r,c=N(e,J);return i.createElement("svg",k({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-square-minus",width:s,height:s,viewBox:"0 0 24 24",stroke:o,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},c),i.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),i.createElement("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"}),i.createElement("line",{x1:"9",y1:"12",x2:"15",y2:"12"}))}var Q=["size","color"];function X(e){var t=e.size,s=t===void 0?24:t,r=e.color,o=r===void 0?"currentColor":r,c=N(e,Q);return i.createElement("svg",k({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-square",width:s,height:s,viewBox:"0 0 24 24",stroke:o,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},c),i.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),i.createElement("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"}))}const C=e=>{let t;const s=new Set,r=(p,d)=>{const u=typeof p=="function"?p(t):p;if(!Object.is(u,t)){const v=t;t=d??typeof u!="object"?u:Object.assign({},t,u),s.forEach(j=>j(t,v))}},o=()=>t,m={setState:r,getState:o,subscribe:p=>(s.add(p),()=>s.delete(p)),destroy:()=>{s.clear()}};return t=e(r,o,m),m},Z=e=>e?C(e):C;var B={exports:{}},I={},A={exports:{}},F={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y=g.exports;function ee(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var te=typeof Object.is=="function"?Object.is:ee,re=y.useState,se=y.useEffect,ne=y.useLayoutEffect,oe=y.useDebugValue;function ce(e,t){var s=t(),r=re({inst:{value:s,getSnapshot:t}}),o=r[0].inst,c=r[1];return ne(function(){o.value=s,o.getSnapshot=t,$(o)&&c({inst:o})},[e,s,t]),se(function(){return $(o)&&c({inst:o}),e(function(){$(o)&&c({inst:o})})},[e]),oe(s),s}function $(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!te(e,s)}catch{return!0}}function ie(e,t){return t()}var ae=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ie:ce;F.useSyncExternalStore=y.useSyncExternalStore!==void 0?y.useSyncExternalStore:ae;A.exports=F;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M=g.exports,le=A.exports;function de(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ue=typeof Object.is=="function"?Object.is:de,pe=le.useSyncExternalStore,xe=M.useRef,fe=M.useEffect,me=M.useMemo,he=M.useDebugValue;I.useSyncExternalStoreWithSelector=function(e,t,s,r,o){var c=xe(null);if(c.current===null){var l={hasValue:!1,value:null};c.current=l}else l=c.current;c=me(function(){function p(h){if(!d){if(d=!0,u=h,h=r(h),o!==void 0&&l.hasValue){var b=l.value;if(o(b,h))return v=b}return v=h}if(b=v,ue(u,h))return b;var z=r(h);return o!==void 0&&o(b,z)?b:(u=h,v=z)}var d=!1,u,v,j=s===void 0?null:s;return[function(){return p(t())},j===null?void 0:function(){return p(j())}]},[t,s,r,o]);var m=pe(e,c[0],c[1]);return fe(function(){l.hasValue=!0,l.value=m},[m]),he(m),m};B.exports=I;var ve=B.exports;const{useSyncExternalStoreWithSelector:be}=ve;function ge(e,t=e.getState,s){const r=be(e.subscribe,e.getState,e.getServerState||e.getState,t,s);return g.exports.useDebugValue(r),r}const D=e=>{const t=typeof e=="function"?Z(e):e,s=(r,o)=>ge(t,r,o);return Object.assign(s,t),s},je=e=>e?D(e):D,V={0:"No data",1:"Singleplayer",2:"Multiplayer",3:"Co-operative",4:"Split-screen",5:"MMO",6:"Battle-Royale"},q={0:"No data",1:"First person",2:"Third person",3:"Isometric",4:"Side view",5:"Text",6:"Auditory",7:"Virtual Reality"},L=e=>V[e]??`Not implemented ${e}`,T=e=>q[e]??`Not implemented ${e}`,_=je(e=>({yearAfter:"",yearBefore:"",yearExact:"",genres:{},themes:{},publisher:{},gameModes:Object.fromEntries(Object.values(V).map(t=>[t,"non-selected"])),perspectives:Object.fromEntries(Object.values(q).map(t=>[t,"non-selected"])),set:e})),w=({_key:e,list:t})=>{const[s]=_(c=>[c.set]),[r,o]=g.exports.useState(!1);return n.exports.jsxs("div",{className:"flex flex-col items-start gap-0.5",children:[n.exports.jsxs("button",{onClick:()=>o(c=>!c),className:"flex w-full items-center justify-center gap-0.5 rounded-md border border-zinc-300 px-2 py-0.5",children:[r?n.exports.jsx(P,{}):n.exports.jsx(R,{}),n.exports.jsxs("span",{children:[e[0].toLocaleUpperCase(),e.slice(1).toLocaleLowerCase()]})]}),r?n.exports.jsx(n.exports.Fragment,{children:Object.entries(t).map(([c,l])=>n.exports.jsxs("button",{onClick:()=>{s(l==="disabled"?{[e]:{...t,[c]:"enabled"}}:l==="enabled"?{[e]:{...t,[c]:"non-selected"}}:{[e]:{...t,[c]:"disabled"}})},className:"flex items-center justify-center gap-0.5",children:[l==="non-selected"?n.exports.jsx(X,{}):l==="disabled"?n.exports.jsx(K,{}):n.exports.jsx(U,{}),c]},c))}):null]})},ye=()=>{const[e,t]=g.exports.useState(!1),s=_(r=>({yearBefore:r.yearBefore,yearAfter:r.yearAfter,yearExact:r.yearExact,set:r.set}));return n.exports.jsxs("div",{children:[n.exports.jsxs("button",{onClick:()=>t(r=>!r),className:"flex w-full items-center justify-center gap-0.5 rounded-md border border-zinc-300 px-2 py-0.5",children:[e?n.exports.jsx(P,{}):n.exports.jsx(R,{}),n.exports.jsx("span",{children:"Release year"})]}),e?n.exports.jsxs(n.exports.Fragment,{children:[n.exports.jsxs("div",{children:[n.exports.jsx("i",{children:"Released before"}),n.exports.jsx("input",{className:"rounded-md border border-zinc-300 bg-transparent py-0.5 px-2",type:"text",value:s.yearBefore,min:-1,step:1,max:new Date().getFullYear()+50,onChange:r=>s.set(()=>({yearBefore:r.currentTarget.value}))})]}),n.exports.jsxs("div",{children:[n.exports.jsx("i",{children:"Released after"}),n.exports.jsx("input",{className:"rounded-md border border-zinc-300 bg-transparent py-0.5 px-2",type:"text",value:s.yearAfter,min:-1,step:1,max:new Date().getFullYear()+50,onChange:r=>s.set(()=>({yearAfter:r.currentTarget.value}))})]}),n.exports.jsxs("div",{children:[n.exports.jsx("i",{children:"Released exact"}),n.exports.jsx("input",{className:"rounded-md border border-zinc-300 bg-transparent py-0.5 px-2",type:"text",value:s.yearExact,min:-1,step:1,max:new Date().getFullYear()+50,onChange:r=>s.set(()=>({yearExact:r.currentTarget.value}))})]})]}):null]})},we=()=>{const e=_();return n.exports.jsxs("div",{className:"grid w-full grid-cols-4 gap-2 rounded-md border border-zinc-300 p-4",children:[n.exports.jsx(w,{_key:"genres",list:e.genres}),n.exports.jsx(w,{_key:"themes",list:e.themes}),n.exports.jsx(ye,{}),n.exports.jsx(w,{_key:"gameModes",list:e.gameModes}),n.exports.jsx(w,{_key:"publisher",list:e.publisher}),n.exports.jsx(w,{_key:"perspectives",list:e.perspectives})]})},O=e=>e!==""&&!Number.isNaN(+e),E=e=>e.filter(([,t])=>t==="disabled").map(([t])=>t),S=e=>e.filter(([,t])=>t==="enabled").map(([t])=>t),Ee=(e,t)=>{const s=Object.entries(t.genres),r=Object.entries(t.publisher),o=Object.entries(t.themes),c=Object.entries(t.perspectives),l=Object.entries(t.gameModes),m=E(s),p=E(r),d=E(o),u=E(c),v=E(l),j=S(s),h=S(r),b=S(o),z=S(c),G=S(l);return e.filter(x=>{if(O(t.yearExact)){if(x.releaseYear!==t.yearExact)return!1}else if(O(t.yearAfter)&&+x.releaseYear<=+t.yearAfter||O(t.yearBefore)&&+x.releaseYear>=+t.yearBefore)return!1;for(const a of x.genres)if(m.includes(a.name))return!1;for(const a of j)if(!x.genres.map(f=>f.name).includes(a))return!1;for(const a of x.themes)if(d.includes(a.name))return!1;for(const a of b)if(!x.themes.map(f=>f.name).includes(a))return!1;for(const a of x.involved_companies)if(p.includes(a.name))return!1;for(const a of h)if(!x.involved_companies.map(f=>f.name).includes(a))return!1;for(const a of x.player_perspectives){const f=T(a);if(u.includes(f))return!1}for(const a of z)if(!x.player_perspectives.map(f=>T(f)).includes(a))return!1;for(const a of x.game_modes){const f=L(a);if(v.includes(f))return!1}for(const a of G)if(!x.game_modes.map(f=>L(f)).includes(a))return!1;return!0})},Se=({game:e})=>n.exports.jsxs("li",{className:"mb-2 grid grid-cols-9 items-center gap-0.5 border-b border-zinc-300 pb-2 last-of-type:border-b-0",children:[n.exports.jsx("div",{style:{backgroundImage:`url(https://d2c6c3qulxklrf.cloudfront.net/covers/webp/${e.s3_id}.webp)`,backgroundSize:"cover",backgroundPosition:"center center"},className:"grid aspect-[9/12] w-full place-items-center text-center",children:n.exports.jsx("span",{className:"bg-white/70 p-0.5",children:e.label})}),n.exports.jsx("div",{className:"grid place-items-center text-center",children:e.platforms.map(t=>t.name).join(`
`)}),n.exports.jsx("div",{className:"grid place-items-center text-center",children:e.genres.map(t=>t.name).join(`
`)}),n.exports.jsx("div",{className:"grid place-items-center text-center",children:e.themes.map(t=>t.name).join(`
`)}),n.exports.jsx("div",{className:"grid place-items-center text-center",children:e.releaseYear}),n.exports.jsx("div",{className:"grid place-items-center text-center",children:e.game_modes.map(t=>L(t)).join(`
`)}),n.exports.jsx("div",{className:"grid place-items-center text-center",children:e.game_engines.map(t=>t.name).join(`
`)}),n.exports.jsx("div",{className:"grid place-items-center text-center",children:e.involved_companies.map(t=>t.name).join(`
`)}),n.exports.jsx("div",{className:"grid place-items-center text-center",children:e.player_perspectives.map(t=>T(t)).join(`
`)})]}),ze=({initial:e})=>{const t=_();g.exports.useEffect(()=>{const r=new Set,o=new Set,c=new Set;for(const d of e){for(const u of d.genres)r.add(u.name);for(const u of d.involved_companies)o.add(u.name);for(const u of d.themes)c.add(u.name)}const l={},m={},p={};for(const d of r)l[d]="non-selected";for(const d of o)m[d]="non-selected";for(const d of c)p[d]="non-selected";t.set(()=>({genres:l,publisher:m,themes:p}))},[]);const s=g.exports.useMemo(()=>Ee(e,t),[t]);return n.exports.jsxs("div",{className:"w-full space-y-2",children:[n.exports.jsx(we,{}),n.exports.jsxs("div",{className:"w-full rounded-md border border-zinc-300 p-4",children:[n.exports.jsxs("p",{className:"text-center",children:[n.exports.jsx("span",{className:"font-bold",children:s.length})," games matching"]}),n.exports.jsx("ul",{className:"space-y-1",children:s.map(r=>n.exports.jsx(Se,{game:r},r.value))})]})]})};export{ze as default};
