import{R as a,r as v}from"./chunks/index.dc0bfdb0.js";import{_ as y,a as j,j as s}from"./chunks/jsx-runtime.4eb9117a.js";var D=["size","color"];function O(e){var t=e.size,r=t===void 0?24:t,o=e.color,c=o===void 0?"currentColor":o,i=y(e,D);return a.createElement("svg",j({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-eye-off",width:r,height:r,viewBox:"0 0 24 24",stroke:c,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},i),a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a.createElement("line",{x1:"3",y1:"3",x2:"21",y2:"21"}),a.createElement("path",{d:"M10.584 10.587a2 2 0 0 0 2.828 2.83"}),a.createElement("path",{d:"M9.363 5.365a9.466 9.466 0 0 1 2.637 -.365c4 0 7.333 2.333 10 7c-.778 1.361 -1.612 2.524 -2.503 3.488m-2.14 1.861c-1.631 1.1 -3.415 1.651 -5.357 1.651c-4 0 -7.333 -2.333 -10 -7c1.369 -2.395 2.913 -4.175 4.632 -5.341"}))}var R=["size","color"];function T(e){var t=e.size,r=t===void 0?24:t,o=e.color,c=o===void 0?"currentColor":o,i=y(e,R);return a.createElement("svg",j({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-eye",width:r,height:r,viewBox:"0 0 24 24",stroke:c,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},i),a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a.createElement("circle",{cx:"12",cy:"12",r:"2"}),a.createElement("path",{d:"M22 12c-2.667 4.667 -6 7 -10 7s-7.333 -2.333 -10 -7c2.667 -4.667 6 -7 10 -7s7.333 2.333 10 7"}))}var B=["size","color"];function P(e){var t=e.size,r=t===void 0?24:t,o=e.color,c=o===void 0?"currentColor":o,i=y(e,B);return a.createElement("svg",j({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-square-check",width:r,height:r,viewBox:"0 0 24 24",stroke:c,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},i),a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a.createElement("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"}),a.createElement("path",{d:"M9 12l2 2l4 -4"}))}var A=["size","color"];function F(e){var t=e.size,r=t===void 0?24:t,o=e.color,c=o===void 0?"currentColor":o,i=y(e,A);return a.createElement("svg",j({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-square-minus",width:r,height:r,viewBox:"0 0 24 24",stroke:c,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},i),a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a.createElement("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"}),a.createElement("line",{x1:"9",y1:"12",x2:"15",y2:"12"}))}var I=["size","color"];function V(e){var t=e.size,r=t===void 0?24:t,o=e.color,c=o===void 0?"currentColor":o,i=y(e,I);return a.createElement("svg",j({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-square",width:r,height:r,viewBox:"0 0 24 24",stroke:c,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},i),a.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a.createElement("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"}))}const z=e=>{let t;const r=new Set,o=(x,u)=>{const d=typeof x=="function"?x(t):x;if(!Object.is(d,t)){const n=t;t=u??typeof d!="object"?d:Object.assign({},t,d),r.forEach(p=>p(t,n))}},c=()=>t,f={setState:o,getState:c,subscribe:x=>(r.add(x),()=>r.delete(x)),destroy:()=>{r.clear()}};return t=e(o,c,f),f},q=e=>e?z(e):z;var _={exports:{}},M={},L={exports:{}},C={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b=v.exports;function W(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Y=typeof Object.is=="function"?Object.is:W,G=b.useState,H=b.useEffect,U=b.useLayoutEffect,J=b.useDebugValue;function K(e,t){var r=t(),o=G({inst:{value:r,getSnapshot:t}}),c=o[0].inst,i=o[1];return U(function(){c.value=r,c.getSnapshot=t,S(c)&&i({inst:c})},[e,r,t]),H(function(){return S(c)&&i({inst:c}),e(function(){S(c)&&i({inst:c})})},[e]),J(r),r}function S(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Y(e,r)}catch{return!0}}function Q(e,t){return t()}var X=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Q:K;C.useSyncExternalStore=b.useSyncExternalStore!==void 0?b.useSyncExternalStore:X;L.exports=C;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w=v.exports,Z=L.exports;function ee(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var te=typeof Object.is=="function"?Object.is:ee,re=Z.useSyncExternalStore,ne=w.useRef,se=w.useEffect,oe=w.useMemo,ce=w.useDebugValue;M.useSyncExternalStoreWithSelector=function(e,t,r,o,c){var i=ne(null);if(i.current===null){var l={hasValue:!1,value:null};i.current=l}else l=i.current;i=oe(function(){function x(m){if(!u){if(u=!0,d=m,m=o(m),c!==void 0&&l.hasValue){var h=l.value;if(c(h,m))return n=h}return n=m}if(h=n,te(d,m))return h;var k=o(m);return c!==void 0&&c(h,k)?h:(d=m,n=k)}var u=!1,d,n,p=r===void 0?null:r;return[function(){return x(t())},p===null?void 0:function(){return x(p())}]},[t,r,o,c]);var f=re(e,i[0],i[1]);return se(function(){l.hasValue=!0,l.value=f},[f]),ce(f),f};_.exports=M;var ie=_.exports;const{useSyncExternalStoreWithSelector:ae}=ie;function le(e,t=e.getState,r){const o=ae(e.subscribe,e.getState,e.getServerState||e.getState,t,r);return v.exports.useDebugValue(o),o}const $=e=>{const t=typeof e=="function"?q(e):e,r=(o,c)=>le(t,o,c);return Object.assign(r,t),r},ue=e=>e?$(e):$,E=ue(e=>({yearAfter:"",yearBefore:"",yearExact:"",genres:{},themes:{},publisher:{},set:e})),de={0:"No data",1:"Singleplayer",2:"Multiplayer",3:"Co-operative",4:"Split-screen",5:"MMO",6:"Battle-Royale"},pe={0:"No data",1:"First person",2:"Third person",3:"Isometric",4:"Side view",5:"Text",6:"Auditory",7:"Virtual Reality"},xe=e=>de[e]??`Not implemented ${e}`,me=e=>pe[e]??`Not implemented ${e}`,N=({_key:e,list:t})=>{const[r]=E(i=>[i.set]),[o,c]=v.exports.useState(!1);return s.exports.jsxs("div",{className:"flex flex-col items-start gap-0.5",children:[s.exports.jsxs("button",{onClick:()=>c(i=>!i),className:"flex w-full items-center justify-center gap-0.5 rounded-md border border-zinc-300 px-2 py-0.5",children:[o?s.exports.jsx(O,{}):s.exports.jsx(T,{}),s.exports.jsxs("span",{children:[e[0].toLocaleUpperCase(),e.slice(1).toLocaleLowerCase()]})]}),o?s.exports.jsx(s.exports.Fragment,{children:Object.entries(t).map(([i,l])=>s.exports.jsxs("button",{onClick:()=>{r(l==="disabled"?{[e]:{...t,[i]:"enabled"}}:l==="enabled"?{[e]:{...t,[i]:"non-selected"}}:{[e]:{...t,[i]:"disabled"}})},className:"flex items-center justify-center gap-0.5",children:[l==="non-selected"?s.exports.jsx(V,{}):l==="disabled"?s.exports.jsx(F,{}):s.exports.jsx(P,{}),i]},i))}):null]})},fe=()=>{const e=E(t=>({yearBefore:t.yearBefore,yearAfter:t.yearAfter,yearExact:t.yearExact,set:t.set}));return s.exports.jsxs("div",{children:[s.exports.jsx("b",{children:"Release date"}),s.exports.jsxs("div",{children:[s.exports.jsx("i",{children:"Released before"}),s.exports.jsx("input",{className:"rounded-md border border-zinc-300 bg-transparent py-0.5 px-2",type:"text",value:e.yearBefore,min:-1,step:1,max:new Date().getFullYear()+50,onChange:t=>e.set(()=>({yearBefore:t.currentTarget.value}))})]}),s.exports.jsxs("div",{children:[s.exports.jsx("i",{children:"Released after"}),s.exports.jsx("input",{className:"rounded-md border border-zinc-300 bg-transparent py-0.5 px-2",type:"text",value:e.yearAfter,min:-1,step:1,max:new Date().getFullYear()+50,onChange:t=>e.set(()=>({yearAfter:t.currentTarget.value}))})]}),s.exports.jsxs("div",{children:[s.exports.jsx("i",{children:"Released exact"}),s.exports.jsx("input",{className:"rounded-md border border-zinc-300 bg-transparent py-0.5 px-2",type:"text",value:e.yearExact,min:-1,step:1,max:new Date().getFullYear()+50,onChange:t=>e.set(()=>({yearExact:t.currentTarget.value}))})]})]})},he=()=>{const e=E();return s.exports.jsxs("div",{className:"grid w-full grid-cols-4 gap-2 rounded-md border border-zinc-300 p-4",children:[s.exports.jsx(fe,{}),s.exports.jsx(N,{_key:"genres",list:e.genres}),s.exports.jsx(N,{_key:"publisher",list:e.publisher}),s.exports.jsx(N,{_key:"themes",list:e.themes})]})},g=e=>e!==""&&!Number.isNaN(+e),ve=(e,t)=>{const r=Object.entries(t.genres),o=Object.entries(t.publisher),c=Object.entries(t.themes),i=r.filter(([,n])=>n==="disabled").map(([n])=>n),l=o.filter(([,n])=>n==="disabled").map(([n])=>n),f=c.filter(([,n])=>n==="disabled").map(([n])=>n),x=r.filter(([,n])=>n==="enabled").map(([n])=>n),u=o.filter(([,n])=>n==="enabled").map(([n])=>n),d=c.filter(([,n])=>n==="enabled").map(([n])=>n);return e.filter(n=>g(t.yearExact)?n.releaseYear===t.yearExact:!0).filter(n=>g(t.yearExact)?!0:g(t.yearAfter)?+n.releaseYear>+t.yearAfter:!0).filter(n=>g(t.yearExact)?!0:g(t.yearBefore)?+n.releaseYear<+t.yearBefore:!0).filter(n=>{for(const p of n.genres)if(i.includes(p.name))return!1;for(const p of x)if(!n.genres.map(m=>m.name).includes(p))return!1;return!0}).filter(n=>{for(const p of n.themes)if(f.includes(p.name))return!1;for(const p of d)if(!n.themes.map(m=>m.name).includes(p))return!1;return!0}).filter(n=>{for(const p of n.involved_companies)if(l.includes(p.name))return!1;for(const p of u)if(!n.involved_companies.map(m=>m.name).includes(p))return!1;return!0})},be=({game:e})=>s.exports.jsxs("li",{className:"mb-2 grid grid-cols-9 items-center gap-0.5 border-b border-zinc-300 pb-2 last-of-type:border-b-0",children:[s.exports.jsx("div",{style:{backgroundImage:`url(https://d2c6c3qulxklrf.cloudfront.net/covers/webp/${e.s3_id}.webp)`,backgroundSize:"cover",backgroundPosition:"center center"},className:"grid aspect-[9/12] w-full place-items-center text-center",children:s.exports.jsx("span",{className:"bg-white/70 p-0.5",children:e.label})}),s.exports.jsx("div",{className:"grid place-items-center text-center",children:e.platforms.map(t=>t.name).join(`
`)}),s.exports.jsx("div",{className:"grid place-items-center text-center",children:e.genres.map(t=>t.name).join(`
`)}),s.exports.jsx("div",{className:"grid place-items-center text-center",children:e.themes.map(t=>t.name).join(`
`)}),s.exports.jsx("div",{className:"grid place-items-center text-center",children:e.releaseYear}),s.exports.jsx("div",{className:"grid place-items-center text-center",children:e.game_modes.map(t=>xe(t)).join(`
`)}),s.exports.jsx("div",{className:"grid place-items-center text-center",children:e.game_engines.map(t=>t.name).join(`
`)}),s.exports.jsx("div",{className:"grid place-items-center text-center",children:e.involved_companies.map(t=>t.name).join(`
`)}),s.exports.jsx("div",{className:"grid place-items-center text-center",children:e.player_perspectives.map(t=>me(t)).join(`
`)})]}),je=({initial:e})=>{const t=E();v.exports.useEffect(()=>{const o=new Set,c=new Set,i=new Set;for(const u of e){for(const d of u.genres)o.add(d.name);for(const d of u.involved_companies)c.add(d.name);for(const d of u.themes)i.add(d.name)}const l={},f={},x={};for(const u of o)l[u]="non-selected";for(const u of c)f[u]="non-selected";for(const u of i)x[u]="non-selected";t.set(()=>({genres:l,publisher:f,themes:x}))},[]);const r=v.exports.useMemo(()=>ve(e,t),[t]);return s.exports.jsxs("div",{className:"w-full space-y-2",children:[s.exports.jsx(he,{}),s.exports.jsxs("div",{className:"w-full rounded-md border border-zinc-300 p-4",children:[s.exports.jsxs("p",{className:"text-center",children:[s.exports.jsx("span",{className:"font-bold",children:r.length})," games matching"]}),s.exports.jsx("ul",{className:"space-y-1",children:r.map(o=>s.exports.jsx(be,{game:o},o.value))})]})]})};export{je as default};
